<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             x:Class="FilmDiziTakip.BolumDetayPage"
             Title="BolumDetayPage"
            >
    <ContentPage.ToolbarItems>
        <ToolbarItem Text="Hesaptan Çıkış Yap" Priority="0" Order="Primary" Clicked="CikisYap"/>
    </ContentPage.ToolbarItems>
    <ScrollView>
        <VerticalStackLayout Padding="10" Spacing="15">

            <Label x:Name="DiziAdiLabel"
               FontSize="28"
               FontAttributes="Bold"
               HorizontalOptions="Center"
               Text="Dizi adı buraya"/>

            <!-- Bölüm Adı -->
            <Label x:Name="BolumAdiLabel"
                FontSize="24"
                FontAttributes="Bold"
                HorizontalOptions="Center"
                Text="Bölüm Adı Buraya" />
        
            <HorizontalStackLayout x:Name="OrtalamaPuanPanel" 
                Spacing="3" 
                VerticalOptions="Center">
                <Label Text="☆" FontSize="20" TextColor="Gray" />
                <Label Text="☆" FontSize="20" TextColor="Gray" />
                <Label Text="☆" FontSize="20" TextColor="Gray" />
                <Label Text="☆" FontSize="20" TextColor="Gray" />
                <Label Text="☆" FontSize="20" TextColor="Gray" />
            </HorizontalStackLayout>

            <!-- Video Oynatıcı --> 
            <toolkit:MediaElement
                    x:Name="BolumOynatici"
                    ShouldAutoPlay="False"
                    HeightRequest="500"
                    Aspect="AspectFit"
                    />

            <!-- Önceki - Sonraki Butonlar -->
            <HorizontalStackLayout HorizontalOptions="Center" Spacing="20">
                <Button x:Name="btnOnceki"
                    Text="⏮ Önceki"
                    Clicked="OncekiButtonTiklandi"
                    BackgroundColor="#444"
                    TextColor="White"/>

                <Button x:Name="btnSonraki"
                    Text="Sonraki ⏭"
                    Clicked="SıradakiButtonTiklandi"
                    BackgroundColor="#444"
                    TextColor="White"/>
            </HorizontalStackLayout>

            <HorizontalStackLayout x:Name="YildizPanel" HorizontalOptions="Center" Spacing="5">

                <!-- 1. Yıldız -->
                <Label Text="☆" FontSize="32" ClassId="1" TextColor="Gray">
                    <Label.GestureRecognizers>
                        <TapGestureRecognizer/>
                        
                    </Label.GestureRecognizers>
                </Label>

                <!-- 2. Yıldız -->
                <Label Text="☆" FontSize="32" ClassId="2" TextColor="Gray">
                    <Label.GestureRecognizers>
                        <TapGestureRecognizer  />
                    </Label.GestureRecognizers>
                </Label>

                <!-- 3. Yıldız -->
                <Label Text="☆" FontSize="32" ClassId="3" TextColor="Gray">
                    <Label.GestureRecognizers>
                        <TapGestureRecognizer  />
                    </Label.GestureRecognizers>
                </Label>

                <!-- 4. Yıldız -->
                <Label Text="☆" FontSize="32" ClassId="4" TextColor="Gray">
                    <Label.GestureRecognizers>
                        <TapGestureRecognizer  />
                    </Label.GestureRecognizers>
                </Label>

                <!-- 5. Yıldız -->
                <Label Text="☆" FontSize="32" ClassId="5" TextColor="Gray">
                    <Label.GestureRecognizers>
                        <TapGestureRecognizer  />
                    </Label.GestureRecognizers>
                </Label>
            </HorizontalStackLayout>

        <!-- Bildirim -->
            <Label x:Name="BildirimLabel"
               TextColor="Green"
               FontSize="14"
               IsVisible="False"
               HorizontalOptions="Center" />

            <!-- Yorumlar Başlık -->
            <Label Text="Yorumlar" FontSize="18" FontAttributes="Bold" />

            <!-- Yorum Listesi -->
            <CollectionView x:Name="YorumlarList" HeightRequest="200">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <VerticalStackLayout Padding="10" Spacing="5">
                            <Label Text="{Binding KullaniciAdi}" FontSize="13" TextColor="WhiteSmoke" FontAttributes="Bold" />
                            <Label Text="{Binding YorumMetni}" FontSize="14" />
                            <Label Text="{Binding Puan, StringFormat='Puan: {0}/5'}" FontSize="12" TextColor="Gray" />
                            <Label Text="{Binding Tarih}" FontSize="12" TextColor="Gray" />


                        </VerticalStackLayout>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        <!-- Yorum Gönder -->
            <Editor x:Name="KullaniciYorumEditor"
                Placeholder="Yorumunuzu buraya yazın..."
                AutoSize="TextChanges"
                HeightRequest="80"
                BackgroundColor="#f2f2f2"
                TextColor="#2C3E50"
                Margin="0,10,0,0"/>

            <Button
                Text="Yorum Gönder"
                Clicked="GonderYorumClicked"
                x:Name="GonderButton"
                BackgroundColor="DarkBlue"
                TextColor="White"
                Margin="0,10,0,0"/>

            <Button
                x:Name="btnGeriDon"
                Text="Geri Dön"
                Clicked="GeriDon"
                BackgroundColor="OrangeRed"/>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>